{% extends 'index.html' %}
{% load static %}

{% block contenido %}
<div class="container">
    <div class="hero">
        <div class="gradient-header">
            <h2>{{ titulo }}</h2>
            <p>Gestiona las cuotas y pagos programados del sistema</p>
        </div>
    </div>

    <section>
        <div class="colors-grid">
            <div class="feature-card">
                <a href="{% url 'crearcuotas' %}" class="card-link">
                    <i class="fas fa-plus"></i>
                    <h3>Nueva Cuota</h3>
                    <p>Registra una nueva cuota en el sistema</p>
                </a>
            </div>
        </div>
    </section>

    {% if cuotas %}
        <section>
            <h2>Lista de Cuotas</h2>
            <div class="colors-grid">
                {% for cuota in cuotas %}
                <div class="feature-card">
                    <i class="fas fa-receipt"></i>
                    <h3>Cuota #{{ cuota.id_cuota }}</h3>
                    <p><strong>Pago Asociado:</strong> 
                        {% if cuota.id_pago %}
                            Pago #{{ cuota.id_pago.id_pago }}
                        {% else %}
                            Sin pago asociado
                        {% endif %}
                    </p>
                    <p><strong>Monto:</strong> ${{ cuota.monto|floatformat:0 }}</p>
                    <p><strong>Vencimiento:</strong> {{ cuota.fecha_vencimiento|date:"d/m/Y" }}</p>
                    <p><strong>Estado:</strong> 
                        {% if cuota.pagado %}
                            <span style="background: #4CAF50; color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem;">
                                <i class="fas fa-check"></i> Pagada
                            </span>
                        {% else %}
                            <span style="background: #f44336; color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem;">
                                <i class="fas fa-times"></i> Pendiente
                            </span>
                        {% endif %}
                    </p>
                    <div class="form-group">
                        <a href="{% url 'editarcuotas' cuota.id_cuota %}" 
                            style="background: #3498db; color: white; padding: 0.5rem; border-radius: 4px; text-decoration: none; margin-right: 0.5rem; display: inline-block;">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="{% url 'eliminarcuotas' cuota.id_cuota %}" 
                            style="background: #e74c3c; color: white; padding: 0.5rem; border-radius: 4px; text-decoration: none; display: inline-block;"
                            onclick="return confirm('¿Estás seguro de que deseas eliminar esta cuota?')">
                            <i class="fas fa-trash-alt"></i>
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    {% else %}
        <section>
            <h2>No hay cuotas registradas</h2>
            <p>Comienza agregando la primera cuota al sistema</p>
            <div class="colors-grid">
                <div class="feature-card">
                    <a href="{% url 'crearcuotas' %}" class="card-link">
                        <i class="fas fa-receipt"></i>
                        <h3>Crear Primera Cuota</h3>
                        <p>Registra la primera cuota en el sistema</p>
                    </a>
                </div>
            </div>
        </section>
    {% endif %}
</div>
{% endblock contenido %}
