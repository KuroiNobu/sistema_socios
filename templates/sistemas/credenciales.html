{% extends 'index.html' %}
{% load static %}
{% block contenido %}
<div class="registro-container">
    <h1>Credenciales</h1>

    <section>
        <h2>Listado con QR asignado</h2>
        {% if cred_list %}
            <div class="grid-cards">
            {% for entry in cred_list %}
                {% with c=entry.obj %}
                <div class="card" style="display:flex;align-items:center;gap:12px;">
                    <div style="flex:1;">
                        <strong>{{ c.usuario }}</strong><br>
                        {{ c.descripcion|default:"(sin descripci√≥n)" }}
                    </div>
                    <div style="text-align:center;">
                        <img src="{{ entry.qr_img }}" alt="QR {{ c.usuario }}" style="width:120px;height:120px;">
                        <div style="font-size:12px;margin-top:6px;">
                            <a href="{{ entry.qr_img }}" download="qr_cred_{{ c.pk }}.png">Descargar</a>
                        </div>
                    </div>
                </div>
                {% endwith %}
            {% endfor %}
            </div>
        {% else %}
            <p>No hay credenciales.</p>
        {% endif %}
    </section>
</div>
{% endblock contenido %}